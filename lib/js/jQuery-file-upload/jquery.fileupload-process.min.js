(function(d){"function"===typeof define&&define.amd?define(["jquery","./jquery.fileupload"],d):"object"===typeof exports?d(require("jquery"),require("./jquery.fileupload")):d(window.jQuery)})(function(d){var h=d.blueimp.fileupload.prototype.options.add;d.widget("blueimp.fileupload",d.blueimp.fileupload,{options:{processQueue:[],add:function(a,b){var c=d(this);b.process(function(){return c.fileupload("process",b)});h.call(this,a,b)}},processActions:{},_processFile:function(a,b){var c=this,e=d.Deferred().resolveWith(c,
[a]).promise();this._trigger("process",null,a);d.each(a.processQueue,function(a,f){a=function(a){return b.errorThrown?d.Deferred().rejectWith(c,[b]).promise():c.processActions[f.action].call(c,a,f)};e=e.then(a,f.always&&a)});e.done(function(){c._trigger("processdone",null,a);c._trigger("processalways",null,a)}).fail(function(){c._trigger("processfail",null,a);c._trigger("processalways",null,a)});return e},_transformProcessQueue:function(a){var b=[];d.each(a.processQueue,function(){var c={},e=this.action,
g=!0===this.prefix?e:this.prefix;d.each(this,function(b,e){"string"===d.type(e)&&"@"===e.charAt(0)?c[b]=a[e.slice(1)||(g?g+b.charAt(0).toUpperCase()+b.slice(1):b)]:c[b]=e});b.push(c)});a.processQueue=b},processing:function(){return this._processing},process:function(a){var b=this,c=d.extend({},this.options,a);c.processQueue&&c.processQueue.length&&(this._transformProcessQueue(c),0===this._processing&&this._trigger("processstart"),d.each(a.files,function(e){var g=e?d.extend({},c):c,f=function(){return a.errorThrown?
d.Deferred().rejectWith(b,[a]).promise():b._processFile(g,a)};g.index=e;b._processing+=1;b._processingQueue=b._processingQueue.then(f,f).always(function(){--b._processing;0===b._processing&&b._trigger("processstop")})}));return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=d.Deferred().resolveWith(this).promise()}})});
