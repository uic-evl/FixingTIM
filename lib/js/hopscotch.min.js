(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.hopscotch=a())}(this,(function(){var ag=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(aj){return typeof aj}:function(aj){return aj&&typeof Symbol==="function"&&aj.constructor===Symbol&&aj!==Symbol.prototype?"symbol":typeof aj};var O;var W;var K;var c;var v;var E;var J;var T="bubble_default";var U=window.Sizzle||null;var ah;var k;var S;var G;var w;var y;var N="undefined";var D=false;var r=(typeof jQuery==="undefined"?"undefined":ag(jQuery))!==N;var u=false;var x=false;var a=/^[a-zA-Z]+[a-zA-Z0-9_-]*$/;var z={left:"right",right:"left"};try{if(ag(window.sessionStorage)!==N){u=true;sessionStorage.setItem("hopscotch.test.storage","ok");sessionStorage.removeItem("hopscotch.test.storage");x=true}}catch(ac){}w={smoothScroll:true,scrollDuration:1000,scrollTopMargin:200,showCloseButton:true,showPrevButton:false,showNextButton:true,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:true,isRtl:false,cookieName:"hopscotch.tour.state"};if(!Array.isArray){Array.isArray=function(aj){return Object.prototype.toString.call(aj)==="[object Array]"}}G=function G(){if(D){y.startTour()}};ah={addClass:function B(al,ao){var ak,an,ap,am,aj;if(!al.className){al.className=ao}else{an=ao.split(/\s+/);ak=" "+al.className+" ";for(am=0,aj=an.length;am<aj;++am){if(ak.indexOf(" "+an[am]+" ")<0){ak+=an[am]+" "}}al.className=ak.replace(/^\s+|\s+$/g,"")}},removeClass:function s(ao,am){var ak,an,al,ap,aj;an=am.split(/\s+/);ak=" "+ao.className+" ";for(ap=0,aj=an.length;ap<aj;++ap){ak=ak.replace(" "+an[ap]+" "," ")}ao.className=ak.replace(/^\s+|\s+$/g,"")},hasClass:function V(ak,aj){var al;if(!ak.className){return false}al=" "+ak.className+" ";return al.indexOf(" "+aj+" ")!==-1},getPixelValue:function F(ak){var aj=typeof ak==="undefined"?"undefined":ag(ak);if(aj==="number"){return ak}if(aj==="string"){return parseInt(ak,10)}return 0},valOrDefault:function i(ak,aj){return(typeof ak==="undefined"?"undefined":ag(ak))!==N?ak:aj},invokeCallbackArrayHelper:function l(aj){var ak;if(Array.isArray(aj)){ak=S[aj[0]];if(typeof ak==="function"){return ak.apply(this,aj.slice(1))}}},invokeCallbackArray:function f(ak){var al,aj;if(Array.isArray(ak)){if(typeof ak[0]==="string"){return ah.invokeCallbackArrayHelper(ak)}else{for(al=0,aj=ak.length;al<aj;++al){ah.invokeCallback(ak[al])}}}},invokeCallback:function m(aj){if(typeof aj==="function"){return aj()}if(typeof aj==="string"&&S[aj]){return S[aj]()}else{return ah.invokeCallbackArray(aj)}},invokeEventCallbacks:function R(ap,ao){var an=k[ap],am,al,ak,aj;if(ao){return this.invokeCallback(ao)}for(ak=0,aj=an.length;ak<aj;++ak){this.invokeCallback(an[ak].cb)}},getScrollTop:function b(){var aj;if(ag(window.pageYOffset)!==N){aj=window.pageYOffset}else{aj=document.documentElement.scrollTop}return aj},getScrollLeft:function e(){var aj;if(ag(window.pageXOffset)!==N){aj=window.pageXOffset}else{aj=document.documentElement.scrollLeft}return aj},getWindowHeight:function P(){return window.innerHeight||document.documentElement.clientHeight},addEvtListener:function j(ak,al,aj){if(ak){return ak.addEventListener?ak.addEventListener(al,aj,false):ak.attachEvent("on"+al,aj)}},removeEvtListener:function h(ak,al,aj){if(ak){return ak.removeEventListener?ak.removeEventListener(al,aj,false):ak.detachEvent("on"+al,aj)}},documentIsReady:function C(){return document.readyState==="complete"},evtPreventDefault:function o(aj){if(aj.preventDefault){aj.preventDefault()}else{if(event){event.returnValue=false}}},extend:function n(ak,aj){var al;for(al in aj){if(aj.hasOwnProperty(al)){ak[al]=aj[al]}}},getStepTargetHelper:function g(al){var aj=document.getElementById(al);if(aj){return aj}if(r){aj=jQuery(al);return aj.length?aj[0]:null}if(U){aj=new U(al);return aj.length?aj[0]:null}if(document.querySelector){try{return document.querySelector(al)}catch(ak){}}if(/^#[a-zA-Z][\w-_:.]*$/.test(al)){return document.getElementById(al.substring(1))}return null},getStepTarget:function M(am){var ak;if(!am||!am.target){return null}if(typeof am.target==="string"){return ah.getStepTargetHelper(am.target)}else{if(Array.isArray(am.target)){var al,aj;for(al=0,aj=am.target.length;al<aj;al++){if(typeof am.target[al]==="string"){ak=ah.getStepTargetHelper(am.target[al]);if(ak){return ak}}}return null}}return am.target},getI18NString:function L(aj){return v[aj]||c[aj]},setState:function aa(al,an,ao){var aj="",ak;if(u&&x){try{sessionStorage.setItem(al,an)}catch(am){x=false;this.setState(al,an,ao)}}else{if(u){sessionStorage.removeItem(al)}if(ao){ak=new Date();ak.setTime(ak.getTime()+ao*24*60*60*1000);aj="; expires="+ak.toGMTString()}document.cookie=al+"="+an+aj+"; path=/"}},getState:function ae(ak){var an=ak+"=",aj=document.cookie.split(";"),al,ao,am;if(u){am=sessionStorage.getItem(ak);if(am){return am}}for(al=0;al<aj.length;al++){ao=aj[al];while(ao.charAt(0)===" "){ao=ao.substring(1,ao.length)}if(ao.indexOf(an)===0){am=ao.substring(an.length,ao.length);break}}return am},clearState:function q(aj){if(u){sessionStorage.removeItem(aj)}else{this.setState(aj,"",-1)}},normalizePlacement:function t(aj){if(!aj.placement&&aj.orientation){aj.placement=aj.orientation}},flipPlacement:function af(al){if(al.isRtl&&!al._isFlipped){var ak=["orientation","placement"],am,aj;if(al.xOffset){al.xOffset=-1*this.getPixelValue(al.xOffset)}for(aj in ak){am=ak[aj];if(al.hasOwnProperty(am)&&z.hasOwnProperty(al[am])){al[am]=z[al[am]]}}al._isFlipped=true}}};ah.addEvtListener(window,"load",G);k={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]};S={};c={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"};v={};W=function W(aj){this.init(aj)};W.prototype={isShowing:false,currStep:undefined,setPosition:function Z(am){var ao,av,ak,aq,an,at,al,au=ah.getStepTarget(am),aj=this.element,ar=this.arrowEl,ap=am.isRtl?"right":"left";ah.flipPlacement(am);ah.normalizePlacement(am);av=aj.offsetWidth;ao=aj.offsetHeight;ah.removeClass(aj,"fade-in-down fade-in-up fade-in-left fade-in-right");ak=au.getBoundingClientRect();al=am.isRtl?ak.right-av:ak.left;if(am.placement==="top"){aq=ak.top-ao-this.opt.arrowWidth;an=al}else{if(am.placement==="bottom"){aq=ak.bottom+this.opt.arrowWidth;an=al}else{if(am.placement==="left"){aq=ak.top;an=ak.left-av-this.opt.arrowWidth}else{if(am.placement==="right"){aq=ak.top;an=ak.right+this.opt.arrowWidth}else{throw new Error("Bubble placement failed because step.placement is invalid or undefined!")}}}}if(am.arrowOffset!=="center"){at=ah.getPixelValue(am.arrowOffset)}else{at=am.arrowOffset}if(!at){ar.style.top="";ar.style[ap]=""}else{if(am.placement==="top"||am.placement==="bottom"){ar.style.top="";if(at==="center"){ar.style[ap]=Math.floor(av/2-ar.offsetWidth/2)+"px"}else{ar.style[ap]=at+"px"}}else{if(am.placement==="left"||am.placement==="right"){ar.style[ap]="";if(at==="center"){ar.style.top=Math.floor(ao/2-ar.offsetHeight/2)+"px"}else{ar.style.top=at+"px"}}}}if(am.xOffset==="center"){an=ak.left+au.offsetWidth/2-av/2}else{an+=ah.getPixelValue(am.xOffset)}if(am.yOffset==="center"){aq=ak.top+au.offsetHeight/2-ao/2}else{aq+=ah.getPixelValue(am.yOffset)}if(!am.fixedElement){aq+=ah.getScrollTop();an+=ah.getScrollLeft()}aj.style.position=am.fixedElement?"fixed":"absolute";aj.style.top=aq+"px";aj.style.left=an+"px"},render:function I(ao,az,aA){var an=this.element,ar,aq,ax,at,ak,am,ay,av,au,aj;if(ao){this.currStep=ao}else{if(this.currStep){ao=this.currStep}}if(this.opt.isTourBubble){at=y.getCurrTour();if(at){aq=at.customData;ar=at.customRenderer;ao.isRtl=ao.hasOwnProperty("isRtl")?ao.isRtl:at.hasOwnProperty("isRtl")?at.isRtl:this.opt.isRtl;ax=at.unsafe;if(Array.isArray(at.steps)){ak=at.steps.length;am=this._getStepI18nNum(this._getStepNum(ak-1));av=this._getStepNum(az)===this._getStepNum(ak-1)}}}else{aq=ao.customData;ar=ao.customRenderer;ax=ao.unsafe;ao.isRtl=ao.hasOwnProperty("isRtl")?ao.isRtl:this.opt.isRtl}if(av){ay=ah.getI18NString("doneBtn")}else{if(ao.showSkip){ay=ah.getI18NString("skipBtn")}else{ay=ah.getI18NString("nextBtn")}}ah.flipPlacement(ao);ah.normalizePlacement(ao);this.placement=ao.placement;aj={i18n:{prevBtn:ah.getI18NString("prevBtn"),nextBtn:ay,closeTooltip:ah.getI18NString("closeTooltip"),stepNum:this._getStepI18nNum(this._getStepNum(az)),numSteps:am},buttons:{showPrev:ah.valOrDefault(ao.showPrevButton,this.opt.showPrevButton)&&this._getStepNum(az)>0,showNext:ah.valOrDefault(ao.showNextButton,this.opt.showNextButton),showCTA:ah.valOrDefault(ao.showCTAButton&&ao.ctaLabel,false),ctaLabel:ao.ctaLabel,showClose:ah.valOrDefault(this.opt.showCloseButton,true)},step:{num:az,isLast:ah.valOrDefault(av,false),title:ao.title||"",content:ao.content||"",isRtl:ao.isRtl,placement:ao.placement,padding:ah.valOrDefault(ao.padding,this.opt.bubblePadding),width:ah.getPixelValue(ao.width)||this.opt.bubbleWidth,customData:ao.customData||{}},tour:{isTour:this.opt.isTourBubble,numSteps:ak,unsafe:ah.valOrDefault(ax,false),customData:aq||{}}};if(typeof ar==="function"){an.innerHTML=ar(aj)}else{if(typeof ar==="string"){if(!y.templates||typeof y.templates[ar]!=="function"){throw new Error('Bubble rendering failed - template "'+ar+'" is not a function.')}an.innerHTML=y.templates[ar](aj)}else{if(E){an.innerHTML=E(aj)}else{if(!y.templates||typeof y.templates[T]!=="function"){throw new Error('Bubble rendering failed - template "'+T+'" is not a function.')}an.innerHTML=y.templates[T](aj)}}}var al=an.children;var aw=al.length;var ap;for(au=0;au<aw;au++){ap=al[au];if(ah.hasClass(ap,"hopscotch-arrow")){this.arrowEl=ap}}an.style.zIndex=typeof ao.zindex==="number"?ao.zindex:"";this._setArrow(ao.placement);this.hide(false);this.setPosition(ao);if(aA){aA(!ao.fixedElement)}return this},_getStepNum:function d(ak){var al=0,ao,am=y.getSkippedStepsIndexes(),an,aj=am.length;for(an=0;an<aj;an++){ao=am[an];if(ao<ak){al++}}return ak-al},_getStepI18nNum:function H(aj){var ak=ah.getI18NString("stepNums");if(ak&&aj<ak.length){aj=ak[aj]}else{aj=aj+1}return aj},_setArrow:function ad(aj){ah.removeClass(this.arrowEl,"down up right left");if(aj==="top"){ah.addClass(this.arrowEl,"down")}else{if(aj==="bottom"){ah.addClass(this.arrowEl,"up")}else{if(aj==="left"){ah.addClass(this.arrowEl,"right")}else{if(aj==="right"){ah.addClass(this.arrowEl,"left")}}}}},_getArrowDirection:function p(){if(this.placement==="top"){return"down"}if(this.placement==="bottom"){return"up"}if(this.placement==="left"){return"right"}if(this.placement==="right"){return"left"}},show:function Q(){var ak=this,aj="fade-in-"+this._getArrowDirection(),al=1000;ah.removeClass(this.element,"hide");ah.addClass(this.element,aj);setTimeout(function(){ah.removeClass(ak.element,"invisible")},50);setTimeout(function(){ah.removeClass(ak.element,aj)},al);this.isShowing=true;return this},hide:function Y(aj){var ak=this.element;aj=ah.valOrDefault(aj,true);ak.style.top="";ak.style.left="";if(aj){ah.addClass(ak,"hide");ah.removeClass(ak,"invisible")}else{ah.removeClass(ak,"hide");ah.addClass(ak,"invisible")}ah.removeClass(ak,"animate fade-in-up fade-in-down fade-in-right fade-in-left");this.isShowing=false;return this},destroy:function X(){var aj=this.element;if(aj){aj.parentNode.removeChild(aj)}ah.removeEvtListener(aj,"click",this.clickCb)},_handleBubbleClick:function A(ak){var ap;ak=ak||window.event;var an=ak.target||ak.srcElement;function al(aq){if(aq===ak.currentTarget){return null}if(ah.hasClass(aq,"hopscotch-cta")){return"cta"}if(ah.hasClass(aq,"hopscotch-next")){return"next"}if(ah.hasClass(aq,"hopscotch-prev")){return"prev"}if(ah.hasClass(aq,"hopscotch-close")){return"close"}return al(aq.parentElement)}ap=al(an);if(ap==="cta"){if(!this.opt.isTourBubble){y.getCalloutManager().removeCallout(this.currStep.id)}if(this.currStep.onCTA){ah.invokeCallback(this.currStep.onCTA)}}else{if(ap==="next"){y.nextStep(true)}else{if(ap==="prev"){y.prevStep(true)}else{if(ap==="close"){if(this.opt.isTourBubble){var aj=y.getCurrStepNum(),am=y.getCurrTour(),ao=aj===am.steps.length-1;ah.invokeEventCallbacks("close");y.endTour(true,ao)}else{if(this.opt.onClose){ah.invokeCallback(this.opt.onClose)}if(this.opt.id&&!this.opt.isTourBubble){y.getCalloutManager().removeCallout(this.opt.id)}else{this.destroy()}}ah.evtPreventDefault(ak)}}}}},init:function ab(ao){var ak=document.createElement("div"),ax=this,av=false,aw,at,al,aq,am,ap,an,aj;this.element=ak;aj={showPrevButton:w.showPrevButton,showNextButton:w.showNextButton,bubbleWidth:w.bubbleWidth,bubblePadding:w.bubblePadding,arrowWidth:w.arrowWidth,isRtl:w.isRtl,showNumber:true,isTourBubble:true};ao=(typeof ao==="undefined"?"undefined":ag(ao))===N?{}:ao;ah.extend(aj,ao);this.opt=aj;ak.className="hopscotch-bubble animated";if(!aj.isTourBubble){ah.addClass(ak,"hopscotch-callout no-number")}else{an=y.getCurrTour();if(an){ah.addClass(ak,"tour-"+an.id)}}aw=function aw(){if(av||!ax.isShowing){return}av=true;setTimeout(function(){ax.setPosition(ax.currStep);av=false},100)};ah.addEvtListener(window,"resize",aw);this.clickCb=function(ay){ax._handleBubbleClick(ay)};ah.addEvtListener(ak,"click",this.clickCb);this.hide();if(ah.documentIsReady()){document.body.appendChild(ak)}else{if(document.addEventListener){at=function ar(){document.removeEventListener("DOMContentLoaded",at);window.removeEventListener("load",at);document.body.appendChild(ak)};document.addEventListener("DOMContentLoaded",at,false)}else{at=function au(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",at);window.detachEvent("onload",at);document.body.appendChild(ak)}};document.attachEvent("onreadystatechange",at)}ah.addEvtListener(window,"load",at)}}};K=function K(){var ak={},aj={};this.createCallout=function(al){var am;if(al.id){if(!a.test(al.id)){throw new Error("Callout ID is using an invalid format. Use alphanumeric, underscores, and/or hyphens only. First character must be a letter.")}if(ak[al.id]){throw new Error("Callout by that id already exists. Please choose a unique id.")}if(!ah.getStepTarget(al)){throw new Error("Must specify existing target element via 'target' option.")}al.showNextButton=al.showPrevButton=false;al.isTourBubble=false;am=new W(al);ak[al.id]=am;aj[al.id]=al;am.render(al,null,function(){am.show();if(al.onShow){ah.invokeCallback(al.onShow)}})}else{throw new Error("Must specify a callout id.")}return am};this.getCallout=function(al){return ak[al]};this.removeAllCallouts=function(){var al;for(al in ak){if(ak.hasOwnProperty(al)){this.removeCallout(al)}}};this.removeCallout=function(am){var al=ak[am];ak[am]=null;aj[am]=null;if(!al){return}al.destroy()};this.refreshCalloutPositions=function(){var al,an,am;for(al in ak){if(ak.hasOwnProperty(al)&&aj.hasOwnProperty(al)){an=ak[al];am=aj[al];if(an&&am){an.setPosition(am)}}}}};O=function O(at){var aC=this,aA,aI,al,az,aq,aG={},ay,ak,am=[],ar,ax=function ax(aJ){if(!aA||!aA.element||!aA.element.parentNode){aA=new W(al)}if(aJ){ah.extend(aA.opt,{bubblePadding:aw("bubblePadding"),bubbleWidth:aw("bubbleWidth"),showNextButton:aw("showNextButton"),showPrevButton:aw("showPrevButton"),showCloseButton:aw("showCloseButton"),arrowWidth:aw("arrowWidth"),isRtl:aw("isRtl")})}return aA},aB=function aB(){if(aA){aA.destroy();aA=null}},aw=function aw(aJ){if(typeof al==="undefined"){return w[aJ]}return ah.valOrDefault(al[aJ],w[aJ])},aE=function aE(){var aJ;if(!az||aq<0||aq>=az.steps.length){aJ=null}else{aJ=az.steps[aq]}return aJ},an=function an(){aC.nextStep()},ap=function ap(aT){var aS=ax(),a3=aS.element,aX=ah.getPixelValue(a3.style.top),aW=aX+ah.getPixelValue(a3.offsetHeight),aU=ah.getStepTarget(aE()),a4=aU.getBoundingClientRect(),a1=a4.top+ah.getScrollTop(),aV=a4.bottom+ah.getScrollTop(),aQ=aX<a1?aX:a1,aJ=aW>aV?aW:aV,a0=ah.getScrollTop(),aL=a0+ah.getWindowHeight(),aM=aQ-aw("scrollTopMargin"),aK,aP,aO,a2,aN,aR,aZ;if(aQ>=a0&&(aQ<=a0+aw("scrollTopMargin")||aJ<=aL)){if(aT){aT()}}else{if(!aw("smoothScroll")){window.scrollTo(0,aM);if(aT){aT()}}else{if((typeof YAHOO==="undefined"?"undefined":ag(YAHOO))!==N&&ag(YAHOO.env)!==N&&ag(YAHOO.env.ua)!==N&&ag(YAHOO.util)!==N&&ag(YAHOO.util.Scroll)!==N){aK=YAHOO.env.ua.webkit?document.body:document.documentElement;aO=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:undefined;aP=new YAHOO.util.Scroll(aK,{scroll:{to:[0,aM]}},aw("scrollDuration")/1000,aO);aP.onComplete.subscribe(aT);aP.animate()}else{if(r){jQuery("body, html").animate({scrollTop:aM},aw("scrollDuration"),aT)}else{if(aM<0){aM=0}a2=a0>aQ?-1:1;aN=Math.abs(a0-aM)/(aw("scrollDuration")/10);aZ=function aY(){var a6=ah.getScrollTop(),a5=a6+a2*aN;if(a2>0&&a5>=aM||a2<0&&a5<=aM){a5=aM;if(aT){aT()}window.scrollTo(0,a5);return}window.scrollTo(0,a5);if(ah.getScrollTop()===a6){if(aT){aT()}return}setTimeout(aZ,10)};aZ()}}}}},au=function au(aN,aJ){var aM,aK,aL;if(aq+aN>=0&&aq+aN<az.steps.length){aq+=aN;aK=aE();aL=function aL(){aM=ah.getStepTarget(aK);if(aM){if(aG[aq]){delete aG[aq]}aJ(aq)}else{aG[aq]=true;ah.invokeEventCallbacks("error");au(aN,aJ)}};if(aK.delay){setTimeout(aL,aK.delay)}else{aL()}}else{aJ(-1)}},aH=function aH(aK,aQ){var aL=ax(),aM=this,aO,aN,aP,aJ;aL.hide();aK=ah.valOrDefault(aK,true);aO=aE();if(aO.nextOnTargetClick){ah.removeEvtListener(ah.getStepTarget(aO),"click",an)}aN=aO;if(aQ>0){aP=aN.multipage}else{aP=aq>0&&az.steps[aq-1].multipage}aJ=function aJ(aS){var aR;if(aS===-1){return this.endTour(true)}if(aK){if(aQ>0){aR=ah.invokeEventCallbacks("next",aN.onNext)}else{aR=ah.invokeEventCallbacks("prev",aN.onPrev)}}if(aS!==aq){return}if(aP){aD();return}aR=ah.valOrDefault(aR,true);if(aR){this.showStep(aS)}else{this.endTour(false)}};if(!aP&&aw("skipIfNoElement")){au(aQ,function(aR){aJ.call(aM,aR)})}else{if(aq+aQ>=0&&aq+aQ<az.steps.length){aq+=aQ;aO=aE();if(!ah.getStepTarget(aO)&&!aP){ah.invokeEventCallbacks("error");return this.endTour(true,false)}aJ.call(this,aq)}else{if(aq+aQ===az.steps.length){return this.endTour()}}}return this},ao=function ao(aM){var aL={},aN,aJ,aK;for(aN in aM){if(aM.hasOwnProperty(aN)&&aN!=="id"&&aN!=="steps"){aL[aN]=aM[aN]}}ar.call(this,aL,true);aJ=ah.getState(aw("cookieName"));if(aJ){aK=aJ.split(":");ay=aK[0];ak=aK[1];if(aK.length>2){am=aK[2].split(",")}ak=parseInt(ak,10)}return this},aj=function aj(aN,aK,aJ){var aL,aM;aq=aN||0;aG=aK||{};aL=aE();aM=ah.getStepTarget(aL);if(aM){aJ(aq);return}if(!aM){ah.invokeEventCallbacks("error");aG[aq]=true;if(aw("skipIfNoElement")){au(1,aJ);return}else{aq=-1;aJ(aq)}}},av=function av(aL){var aK=az.steps[aL],aJ=ax(),aN=ah.getStepTarget(aK);function aM(){aJ.show();ah.invokeEventCallbacks("show",aK.onShow)}if(aq!==aL&&aE().nextOnTargetClick){ah.removeEvtListener(ah.getStepTarget(aE()),"click",an)}aq=aL;aJ.hide(false);aJ.render(aK,aL,function(aO){if(aO){ap(aM)}else{aM()}if(aK.nextOnTargetClick){ah.addEvtListener(aN,"click",an)}});aD()},aD=function aD(){var aJ=az.id+":"+aq,aK=y.getSkippedStepsIndexes();if(aK&&aK.length>0){aJ+=":"+aK.join(",")}ah.setState(aw("cookieName"),aJ,1)},aF=function aF(aJ){if(aJ){this.configure(aJ)}};this.getCalloutManager=function(){if((typeof aI==="undefined"?"undefined":ag(aI))===N){aI=new K()}return aI};this.startTour=function(aQ,aP){var aL,aK,aN={},aM=this;if(!az){if(!aQ){throw new Error("Tour data is required for startTour.")}if(!aQ.id||!a.test(aQ.id)){throw new Error("Tour ID is using an invalid format. Use alphanumeric, underscores, and/or hyphens only. First character must be a letter.")}az=aQ;ao.call(this,aQ)}if((typeof aP==="undefined"?"undefined":ag(aP))!==N){if(aP>=az.steps.length){throw new Error("Specified step number out of bounds.")}aK=aP}if(!ah.documentIsReady()){D=true;return this}if(typeof aK==="undefined"&&az.id===ay&&(typeof ak==="undefined"?"undefined":ag(ak))!==N){aK=ak;if(am.length>0){for(var aO=0,aJ=am.length;aO<aJ;aO++){aN[am[aO]]=true}}}else{if(!aK){aK=0}}aj(aK,aN,function(aS){var aR=aS!==-1&&ah.getStepTarget(az.steps[aS]);if(!aR){aM.endTour(false,false);return}ah.invokeEventCallbacks("start");aL=ax();aL.hide(false);aM.isActive=true;if(!ah.getStepTarget(aE())){ah.invokeEventCallbacks("error");if(aw("skipIfNoElement")){aM.nextStep(false)}}else{aM.showStep(aS)}});return this};this.showStep=function(aL){var aK=az.steps[aL],aJ=aq;if(!ah.getStepTarget(aK)){aq=aL;ah.invokeEventCallbacks("error");aq=aJ;return}if(aK.delay){setTimeout(function(){av(aL)},aK.delay)}else{av(aL)}return this};this.prevStep=function(aJ){aH.call(this,aJ,-1);return this};this.nextStep=function(aJ){aH.call(this,aJ,1);return this};this.endTour=function(aL,aJ){var aK=ax(),aM;aL=ah.valOrDefault(aL,true);aJ=ah.valOrDefault(aJ,true);if(az){aM=aE();if(aM&&aM.nextOnTargetClick){ah.removeEvtListener(ah.getStepTarget(aM),"click",an)}}aq=0;ak=undefined;aK.hide();if(aL){ah.clearState(aw("cookieName"))}if(this.isActive){this.isActive=false;if(az&&aJ){ah.invokeEventCallbacks("end")}}this.removeCallbacks(null,true);this.resetDefaultOptions();aB();az=null;return this};this.getCurrTour=function(){return az};this.getCurrTarget=function(){return ah.getStepTarget(aE())};this.getCurrStepNum=function(){return aq};this.getSkippedStepsIndexes=function(){var aJ=[],aK;for(aK in aG){aJ.push(aK)}return aJ};this.refreshBubblePosition=function(){var aJ=aE();if(aJ){ax().setPosition(aJ)}this.getCalloutManager().refreshCalloutPositions();return this};this.listen=function(aL,aJ,aK){if(aL){k[aL].push({cb:aJ,fromTour:aK})}return this};this.unlisten=function(aN,aK){var aM=k[aN],aL,aJ;for(aL=0,aJ=aM.length;aL<aJ;++aL){if(aM[aL].cb===aK){aM.splice(aL,1)}}return this};this.removeCallbacks=function(aN,aL){var aO,aM,aJ,aK;for(aK in k){if(!aN||aN===aK){if(aL){aO=k[aK];for(aM=0,aJ=aO.length;aM<aJ;++aM){if(aO[aM].fromTour){aO.splice(aM--,1);--aJ}}}else{k[aK]=[]}}}return this};this.registerHelper=function(aK,aJ){if(typeof aK==="string"&&typeof aJ==="function"){S[aK]=aJ}};this.unregisterHelper=function(aJ){S[aJ]=null};this.invokeHelper=function(aM){var aK=[],aL,aJ;for(aL=1,aJ=arguments.length;aL<aJ;++aL){aK.push(arguments[aL])}if(S[aM]){S[aM].call(null,aK)}};this.setCookieName=function(aJ){al.cookieName=aJ;return this};this.resetDefaultOptions=function(){al={};return this};this.resetDefaultI18N=function(){v={};return this};this.getState=function(){return ah.getState(aw("cookieName"))};ar=function ar(aM,aQ){var aK,aP=["next","prev","start","end","show","error","close"],aL,aO,aN,aJ;if(!al){this.resetDefaultOptions()}ah.extend(al,aM);if(aM){ah.extend(v,aM.i18n)}for(aN=0,aJ=aP.length;aN<aJ;++aN){aL="on"+aP[aN].charAt(0).toUpperCase()+aP[aN].substring(1);if(aM[aL]){this.listen(aP[aN],aM[aL],aQ)}}aK=ax(true);return this};this.configure=function(aJ){return ar.call(this,aJ,false)};this.setRenderer=function(aJ){var aK=typeof aJ==="undefined"?"undefined":ag(aJ);if(aK==="string"){T=aJ;E=undefined}else{if(aK==="function"){E=aJ}}return this};this.setEscaper=function(aJ){if(typeof aJ==="function"){J=aJ}return this};aF.call(this,at)};y=new O();(function(){var aj={};aj.escape=function(ak){if(J){return J(ak)}if(ak==null){return""}return(""+ak).replace(new RegExp("[&<>\"']","g"),function(al){if(al=="&"){return"&amp;"}if(al=="<"){return"&lt;"}if(al==">"){return"&gt;"}if(al=='"'){return"&quot;"}if(al=="'"){return"&#x27;"}})};this["templates"]=this["templates"]||{};this["templates"]["bubble_default"]=function(ao){var ap,ar="",an=aj.escape,av=Array.prototype.join;function ak(){ar+=av.call(arguments,"")}function at(ax,aw){if(aw){return aj.escape(ax)}return ax}ar+="\n";var au=ao.i18n;var aq=ao.buttons;var am=ao.step;var al=ao.tour;ar+='\n<div class="hopscotch-bubble-container" style="width: '+((ap=(am.width))==null?"":ap)+"px; padding: "+((ap=(am.padding))==null?"":ap)+'px;">\n  ';if(al.isTour){ar+='<span class="hopscotch-bubble-number">'+((ap=(au.stepNum))==null?"":ap)+"</span>"}ar+='\n  <div class="hopscotch-bubble-content">\n    ';if(am.title!==""){ar+='<h3 class="hopscotch-title">'+((ap=(at(am.title,al.unsafe)))==null?"":ap)+"</h3>"}ar+="\n    ";if(am.content!==""){ar+='<div class="hopscotch-content">'+((ap=(at(am.content,al.unsafe)))==null?"":ap)+"</div>"}ar+='\n  </div>\n  <div class="hopscotch-actions">\n    ';if(aq.showPrev){ar+='<button class="hopscotch-nav-button prev hopscotch-prev">'+((ap=(au.prevBtn))==null?"":ap)+"</button>"}ar+="\n    ";if(aq.showCTA){ar+='<button class="hopscotch-nav-button next hopscotch-cta">'+((ap=(aq.ctaLabel))==null?"":ap)+"</button>"}ar+="\n    ";if(aq.showNext){ar+='<button class="hopscotch-nav-button next hopscotch-next">'+((ap=(au.nextBtn))==null?"":ap)+"</button>"}ar+="\n  </div>\n  ";if(aq.showClose){ar+='<button class="hopscotch-bubble-close hopscotch-close">'+((ap=(au.closeTooltip))==null?"":ap)+"</button>"}ar+='\n</div>\n<div class="hopscotch-bubble-arrow-container hopscotch-arrow">\n  <div class="hopscotch-bubble-arrow-border"></div>\n  <div class="hopscotch-bubble-arrow"></div>\n</div>\n';return ar}}).call(y);var ai=y;return ai})));