var App=App||{},PrimaryStructureView=function(){function g(b,d){var a=this._model.getStructure().residueSelect(function(a){return a.index()===d}),e=this._model.getChain(),c=[];a.eachResidue(function(a){c.push(a._residue)});d3.select(this._dom).selectAll("span").filter(function(a,c){return a===b&&c===d+1}).classed("selected_sequence")?this.residueDeselected.notify({residue:c[e]}):this.residueSelected.notify({residue:c[e]})}function f(b,d){var a=this;a._model=b;a._id=d.id;a._position=d.position;a._dom=
null;a.residueSelected=new EventNotification(this);a.residueDeselected=new EventNotification(this);a._model.proteinAdded.attach(function(b,c){a.initialize();a.render(b.getSequence(c.structure))});a._model.residueSelected.attach(function(b,c){c.replace&&d3.select(a._dom).selectAll("span").classed("selected_sequence",!1);d3.select(a._dom).selectAll("span").filter(function(a,b){return a===c.residue._name&&b===c.residue._index+1}).classed("selected_sequence",!0)});a._model.residueDeselected.attach(function(b,
c){d3.select(a._dom).selectAll("span").filter(function(a,b){return a===c.residue._name&&b===c.residue._index+1}).classed("selected_sequence",!1)})}f.prototype={show:function(){this._$dom=$("#"+this._id);this._dom=this._$dom[0]},initialize:function(){this.width=this._dom.clientWidth;this.height=this._dom.clientHeight;d3.select(this._dom).selectAll().remove();d3.select(this._dom).attr("height",self.height).append("span").attr("class","sequence");d3.select(this._dom).classed("black-background",!1).selectAll(".col-md-6").classed("black-background",
!1)},render:function(b){b=d3.select(this._dom).select("span").selectAll("span").data(b);b.enter().append("span").attr("class","residue").merge(b).text(function(b,a){return"("+parseInt(a+1)+") "+b}).style("width",this.width).on("click",g.bind(this)).exit().remove()}};return f}();
