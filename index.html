<html>
<head>
    <title>ProtoSNP</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

    <!-- CSS LIB -->
    <link type="text/css" rel="stylesheet" href="lib/css/hopscotch.css" >

    <!--<link type="text/css" rel="stylesheet" href="lib/css/bootstrap.min.css">-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <link type="text/css" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,600">

    <link type="text/css" rel="stylesheet" href="lib/css/jquery.fileupload.min.css">
    <link type="text/css" rel="stylesheet" href="lib/css/typehead.min.css">
    <link type="text/css" rel="stylesheet" href="lib/css/d3-context-menu.min.css">
    <link type="text/css" rel="stylesheet" href="lib/css/example-styles.min.css">
    <link type="text/css" rel="stylesheet" href="lib/css/jquery.contextMenu.min.css" >

    <link type="text/css" rel="stylesheet" href="lib/css/chardinjs.css" >

    <!-- CSS SRC -->
    <link type="text/css" rel="stylesheet" href="src/css/sequenceViewer.css">
    <link type="text/css" rel="stylesheet" href="src/css/splash.css">
    <link type="text/css" rel="stylesheet" href="src/css/trendImageViewer.css">
    <link type="text/css" rel="stylesheet" href="src/css/frequencyViewer.css">
    <link type="text/css" rel="stylesheet" href="src/css/molecularViewer.css">
    <link type="text/css" rel="stylesheet" href="src/css/colorLegend.css">
    <link type="text/css" rel="stylesheet" href="src/css/menuView.css">
    <link type="text/css" rel="stylesheet" href="src/css/loadingSpinner.css">
    <link type="text/css" rel="stylesheet" href="src/css/main.css">

    <!-- JS LIB -->
    <script type='text/javascript' src='lib/js/bio-pv.js'></script>
    <script type='text/javascript' src='lib/js/three.min.js'></script>

    <!-- Data Visualization Libs -->
    <!--<script src="https://d3js.org/d3.v4.js"></script>-->
    <script type='text/javascript' src='lib/js/d3.min.js'></script>
    <script type='text/javascript' src="lib/js/queue.v1.min.js"></script>
    <script type='text/javascript' src='lib/js/d3-tip.min.js'></script>
    <script type='text/javascript' src="lib/js/twgl.min.js"></script>
    <script type='text/javascript' src='lib/js/d3-context-menu.min.js'></script>
    <script type='text/javascript' src='lib/js/colorbrewer.min.js'></script>

    <script type='text/javascript' src='lib/js/lodash.min.js'></script>
    <script type='text/javascript' src='lib/js/levenshtein.min.js'></script>
    <script type='text/javascript' src='lib/js/knockout-min.js'></script>

    <!-- jQuery File Upload-->
    <script type='text/javascript' src='lib/js/jquery-2.2.4.min.js'></script>
    <script type='text/javascript' src='lib/js/jQuery-file-upload/jquery.ui.widget.min.js'></script>
    <script type='text/javascript' src='lib/js/jQuery-file-upload/jquery.iframe-transport.min.js'></script>
    <script type='text/javascript' src='lib/js/jQuery-file-upload/jquery.fileupload.min.js'></script>
    <script type='text/javascript' src='lib/js/jQuery-file-upload/jquery.fileupload-process.min.js'></script>

    <!-- jQuery Context Menu -->
    <script type='text/javascript' src="lib/js/jQuery-context/jquery.contextMenu.min.js"></script>
    <script type='text/javascript' src="lib/js/jQuery-context/jquery.ui.position.min.js"></script>
    <script type='text/javascript' src="lib/js/jQuery-context/main.min.js"></script>
    <script type='text/javascript' src="lib/js/typehead.bundle.js"></script>

    <!-- Bootstrap -->
    <!--<script type='text/javascript' src='lib/js/bootstrap.min.js'></script>-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>

    <script type='text/javascript' src="http://wzrd.in/bundle/biojs-io-fasta@latest"></script>
    <script type='text/javascript' src="lib/js/sweetalert2.all.js"></script>
    <script type='text/javascript' src="lib/js/chardinjs.js"></script>

    <!-- JS SRC -->

    <!-- Algorithms -->
    <script type='text/javascript' src='src/js/algorithms/Needleman-Wunsch.js'></script>
    <script type='text/javascript' src='src/js/algorithms/SequenceSorting.js'></script>
    <script type='text/javascript' src='src/js/algorithms/LevenshteinDistance.js'></script>

    <script type='text/javascript' src='src/js/MVC/Event.js'></script>
    <script type='text/javascript' src='src/js/MVC/models/ProteinModel.js'></script>
    <script type='text/javascript' src='src/js/MVC/models/ProteinFamilyModel.js'></script>
    <script type='text/javascript' src='src/js/MVC/models/FilteringMenuModel.js'></script>

    <script type='text/javascript' src='src/js/MVC/views/FilteringMenuView.js'></script>
    <script type='text/javascript' src='src/js/MVC/views/PrimaryStructureView.js'></script>
    <script type='text/javascript' src='src/js/MVC/views/TertiaryStructureView.js'></script>
    <script type='text/javascript' src='src/js/MVC/views/ProteinFamilyView.js'></script>
    <script type='text/javascript' src='src/js/MVC/views/ResidueFrequencyView.js'></script>
    <script type='text/javascript' src='src/js/MVC/views/AxisView3D.js'></script>
    <script type='text/javascript' src='src/js/MVC/views/BrushView.js'></script>

    <script type='text/javascript' src='src/js/MVC/controllers/FilteringMenuController.js'></script>
    <script type='text/javascript' src='src/js/MVC/controllers/PrimaryStructureController.js'></script>
    <script type='text/javascript' src='src/js/MVC/controllers/TertiaryStructureController.js'></script>
    <script type='text/javascript' src='src/js/MVC/controllers/ProteinFamilyController.js'></script>

    <script type='text/javascript' src='src/js/utilities/fileUtilities.js'></script>
    <script type='text/javascript' src='src/js/utilities/keyboardUtilities.js'></script>
    <script type='text/javascript' src='src/js/utilities/pvUtilities.js'></script>
    <script type='text/javascript' src='src/js/utilities/d3Utilities.js'></script>
    <script type='text/javascript' src='src/js/utilities/brushUtilities.js'></script>
    <script type='text/javascript' src='src/js/utilities/residueMappingUtilities.js'></script>
    <script type='text/javascript' src='src/js/utilities/databaseMappingUtils.js'></script>
    <script type='text/javascript' src='src/js/utilities/textUtilities.js'></script>
    <script type='text/javascript' src='src/js/utilities/promiseUtilities.js'></script>
    <script type='text/javascript' src='src/js/utilities/jQueryContextUtility.js'></script>
    <script type='text/javascript' src='src/js/utilities/utilities.js'></script>

    <!-- Main entry into the program -->
    <script type='text/javascript' src='src/js/main.js'></script>
</head>

<body>
<!-- Navigation menu -->
<nav id="menu" class="navbar navbar-light no-gutters">
    <div class="container-fluid p-0" style="width: 100%">
        <div class="row w-100 no-gutters">
            <div class="col-auto mr-auto">
                <h2 class="center-vertically">Proto-SNP</h2>
            </div>
            <div class="col-auto ml-auto">
                <ul class="navbar-nav center-vertically top">
                    <li class="nav-item">
                        <button class="btn navbar-btn btn-info btn-circle" data-toggle="modal" data-target="#aboutModal" id="aboutButton">
                            <span class="fa fa-info"></span>
                        </button>
                        <button class="btn navbar-btn btn-info btn-circle" id="helpButton">
                            <span class="fa fa-question"></span>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</nav>

<!-- Main container of the application -->
<div class="container-fluid" id="main_container" style="width:100%">
    <!-- 3D Molecule Viewers -->
    <div class="molecularViewersRow row no-gutters">
        <div class="col-10">
            <div id="molecularViewerTemplate" class="row w-100 no-gutters" data-bind="template: {name: 'molecularViewers', foreach : views}"></div>
            <!-- Tertiary Viewer -->
            <script type="text/html" id="molecularViewers" >
                <div class="col-6" data-bind="attr: {id: $data._id}">
                    <div class="x_title view absolute tertiary_viewer_width"></div>
                    <div id="pvDiv" class="molecular-viewer">
                        <div id="splash"></div>
                    </div>
                </div>
            </script>
        </div>

        <!-- Sequence Viewer -->
        <div class="col-2 sequenceViewers">
            <div id="sequenceViewer" class="w-100">
                <div id="sequenceViewerTemplate" class="row no-gutters w-100"
                     data-bind="template: {name: 'sequenceViewers', foreach : views}"></div>
                <script type="text/html" id="sequenceViewers">
                    <div class="col-6 sequence-container"
                         data-bind="css: { left_scroll: $data._position === 'left' }">
                        <div class="x_title view bg-light hidden">
                            <span id="sequenceViewerMenu" class="nav-link"></span>
                        </div>
                        <div data-bind="attr: {id: $data._id}"></div>
                    </div>
                </script>
            </div>
        </div>
    </div>
     <!--Color Legend-->
    <!--<div class="legendRow row">-->
        <!--<div class="col-4">-->
            <!--<div class="legendSVG" id="tertiaryColorLegend"></div>-->
        <!--</div>-->
        <!--<div class="col-4">-->
            <!--<div class="legendSVG" id="familyColorLegend"></div>-->
        <!--</div>-->
    <!--</div>-->

    <!-- Trend Image -->
    <div class="row proteinFamilyRow no-gutters" id="proteinFamilyRow">
        <div class="col-12">
            <!-- Trend Image View-->
            <div class="row TrendImageView center-aligned">
                <div id="trendImageViewer" class="col-12 trend-viewer center-aligned">
                    <div id="trendSplash"></div>
                </div>
            </div>
            <!-- End Trend Image View-->
        </div>
    </div>

    <!-- Residue Frequency Viewer-->
    <div class="row no-gutters" id="familyResidues">
        <div id="residueSummaryView" class="col-12 residueSummaryView center-aligned hidden"></div>
    </div>

</div>

<!-- Trend Image Protein Selection Modal -->
<div class="modal fade" id="viewerModal" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body">
                <button type="button" class="btn btn-default btn-left_viewer" data-dismiss="modal">Left Viewer</button>
                <button type="button" class="btn btn-default btn-right_viewer" data-dismiss="modal">Right Viewer</button>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Trend image set sorting protein -->
<div class="modal fade" id="proteinSelection" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Select a protein to sort by</h4>
            </div>
            <div class="modal-body">
                <input id="proteinSortSelection" type="text" class="typeahead tt-query" autocomplete="off" spellcheck="false">
            </div>
            <div class="modal-footer">
                <button type="button" id="setProtein" class="btn btn-primary" data-dismiss="modal">Set Protein</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div id="startupModalDiv"></div>
<div id="aboutModalDiv"></div>

<!-- WebGL Shaders for Trend Image -->
<script id="vs" type="notjs">
    attribute vec4 position;
    varying vec2 v_texCoord;

    void main() {
      gl_Position = position;

      // Since we know we'll be passing in -1 to +1 for position
      v_texCoord = position.xy * 0.5 + 0.5;
    }
</script>
<script id="fs" type="notjs">
    precision highp float;

    // texture
    uniform sampler2D u_texture;

    // texture position
    varying vec2 v_texCoord;

    void main() {

       gl_FragColor =
        texture2D(u_texture, v_texCoord);
    }
  </script>

</body>

</html>